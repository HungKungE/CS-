## SQL ( RDB )

1. 설명
- 관계형 데이터베이스
- 데이터는 정해진 데이터 스키마에 따라 테이블에 저장된다.
- 데이터는 관계를 통해 여러 테이블에 분산된다.
- MySQL, PostgreSQL...

2. 종류 및 문법
1) MySQL

    - 장점

        > 참고할 문서가 많다 -> 개발할 때 도움 됨
        > 인덱싱, 쿼리 최적화 등의 기능 -> 높은 성능
        > B-트리 기반의 인덱스 -> 최대 64개의 인덱스 제공
        > 스레드 기반의 메모리 할당 시스템
        > 매우 빠른 JOIN
        > 

    - 주요 문법

        > 삽입 ( Insert )

        ```sh
        // 테이블에 새로운 데이터 행 삽입
        Insert Into "Table_Name" (열1, 열2, ...) Value (값1, 값2, ...);
        ```

        > 선택 ( Select )

        ```sh
        // 테이블에서 조건을 만족하는 값을 조회.
        Select 열1, 열2, ... From "Table_Name" Where "조건";
        ```

        > 수정 ( Update )

        ```sh
        // 테이블에서 조건을 만족하는 행의 컬럼 값을 수정
        Update "Table_Name" Set 열1=값1, 열2=값2 ... Where "조건";
        ```

        > 삭제 ( Delete )

        ```sh
        // 테이블에 조건을 만족하는 행 삭제 
        DELETE FROM "Table_Name" Where "조건";
        ```

    - 가끔 필요한 문법

        > 테이블 컬럼 추가

        ```sh
        ALTER TABLE "Table_Name" ADD COLUMN "Coluumn_Name" "Value_Type";
        ```

        > 테이블 컬럼 삭제
        
        ```sh
        ALTER TABLE "Table_Name" Drop COLUMN "Coluumn_Name";
        ```

        > 테이블 컬럼 수정
        
        ```sh
        // 해당 컬럼의 타입 수정
        ALTER TABLE "Table_Name" MODIFY COLUMN "Coluumn_Name" "Value_Type";
        ALTER TABLE "Table_Name" MODIFY COLUMN "Coluumn_Name" "Value_Type" NOT NULL;
        
        //  컬럼의 이름과 타입 수정
        ALTER TABLE "Table_Name" Change COLUMN "Coluumn_Name" "New_Column_Name" "Value_Type";
        ```

        > 테이블 드랍
        
        ```sh
        Drop TABLE "Table_Name";
        ```


2) PostgreSQL
    - 장점

        > vacuum : 디스크 조각이 차지하는 영역을 회수하는 장치
        > 32TB의 최대 테이블 크기
        > SQL 뿐 아니라, JSON을 이용해서 데이터 접근 가능
        > 지정 시간의 데이터를 복구하는 기능 + 백업
        > 로깅
        > 접근 제어
        > 중첩된 트랜젝션

3. 정규화

- 데이터 중복 감소 -> 저장 공간 절약.
- 데이터 접근(조회,수정,삭제 등) 용이함.

> 예시 : 구민 체육센터 등록한 사람들 정리

1) 1정규화 : 하나의 칸에는 하나의 데이터만 저장

> DB의 초기 모습

|user_id|name|program|
|-----|-----|
|101|김민수|헬스|
|102|최수현|야구|
|103|박창진|농구|

> 이 때, 김민수 씨가 야구를 추가로 등록함

|user_id|name|program|
|-----|-----|
|101|김민수|헬스, 야구|
|102|최수현|야구|
|103|박창진|농구|

> DB의 컬럼 하나에 여러 값을 넣었더니 문제가 발생
- 1) 야구 수강신청한 사람 찾을 때, 쿼리를 신경써서 해야함
- 2) 프로그램 이름 수정하는 것도 힘듬

> 1 정규화 적용

|user_id|name|program|
|-----|-----|
|101|김민수|헬스|
|102|최수현|야구|
|103|박창진|농구|
|101|김민수|야구|

2) 2정규화 : 현재 테이블의 주제와 관련없는 컬럼을 다른 테이블로 분리.

> DB의 초기 모습

|user_id|name|program|가격|
|-----|-----|-----|
|101|김민수|헬스|5,000|
|102|최수현|야구|10,000|
|103|박창진|농구|80,000|
|101|김민수|야구|10,000|

> 야구 가격을 바꾸려면 야구인 모든 행을 찾아서 가격을 수정해야함.
> 2정규화 적용

|user_id|name|program|
|-----|-----|
|101|김민수|헬스|
|102|최수현|야구|
|103|박창진|농구|
|101|김민수|야구|

|program|가격|
|-----|-----|
|헬스|5,000|
|야구|10,000|
|농구|80,000|

> 가격 바꾸기 편해짐
> 그런데 어떤 사람이 내야하는 금액을 알려면 테이블 2개를 써야함.
> JOIN 사용..

3) 3정규화 : 일반 컬럼에 종속된 컬럼을 다른 테이블로 분리.

> DB의 초기 모습

|program|가격|강사|대학|
|-----|-----|-----|-----|
|헬스|5,000|김김김|고구려대|
|야구|10,000|박박박|신라대|
|농구|80,000|최최최|백제대|

> 강사라는 일반 컬럼에 대학이 종속됨.
> 3정규화 적용

|program|가격|강사|
|-----|-----|-----|
|헬스|5,000|김김김|
|야구|10,000|박박박|
|농구|80,000|최최최|

|강사|대학|
|-----|-----|
|김김김|고구려대|
|박박박|신라대|
|최최최|백제대|

> 대학 컬럼 수정이 편리해짐
